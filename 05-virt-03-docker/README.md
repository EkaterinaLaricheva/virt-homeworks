
# Домашнее задание к занятию "5.3. Введение. Экосистема. Архитектура. Жизненный цикл Docker контейнера"

## Как сдавать задания

Обязательными к выполнению являются задачи без указания звездочки. Их выполнение необходимо для получения зачета и диплома о профессиональной переподготовке.

Задачи со звездочкой (*) являются дополнительными задачами и/или задачами повышенной сложности. Они не являются обязательными к выполнению, но помогут вам глубже понять тему.

Домашнее задание выполните в файле readme.md в github репозитории. В личном кабинете отправьте на проверку ссылку на .md-файл в вашем репозитории.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

## Задача 1

Сценарий выполения задачи:

- создайте свой репозиторий на https://hub.docker.com;
- выберете любой образ, который содержит веб-сервер Nginx;
- создайте свой fork образа;
- реализуйте функциональность:
запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
```
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m DevOps Engineer!</h1>
</body>
</html>
```
Опубликуйте созданный форк в своем репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.

https://hub.docker.com/repository/docker/lekani/elaricheva

## Задача 2

Посмотрите на сценарий ниже и ответьте на вопрос:
"Подходит ли в этом сценарии использование Docker контейнеров или лучше подойдет виртуальная машина, физическая машина? Может быть возможны разные варианты?"

Детально опишите и обоснуйте свой выбор.

--

Сценарий:

- Высоконагруженное монолитное java веб-приложение - 
физический сервер, т.к. монолитное, значит не работает без изменения кода,
   и так как высоконагруженное -  то необходим физический доступ к ресурсам.
- Nodejs веб-приложение - 
веб приложение, достаточно использовать Docker.
- Мобильное приложение c версиями для Android и iOS - 
докер не имеет GUI, поэтому ВМ. Этого будет достаточно.
- Шина данных на базе Apache Kafka - 
в зависимости от того, как мы хотим использовать. Если потеря данных не критична, например в тестировании, то достаточно Docker, но для прода лучше ВМ. 
- Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana - -
ВМ, т.к. важна потеря данных. Использование сервера избытаточно.
- Мониторинг-стек на базе Prometheus и Grafana - 
для данных систем удобно и быстро использовать Docker
- MongoDB, как основное хранилище данных для java-приложения - 
Для хранения данных Docker не подходит, а физ. сервер может оказаться избыточным. Поэтому ВМ.
- Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry - 
Кажется, что Docker будет достаточно.


## Задача 3

- Запустите первый контейнер из образа ***centos*** c любым тэгом в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера;
- Запустите второй контейнер из образа ***debian*** в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера;
- Подключитесь к первому контейнеру с помощью ```docker exec``` и создайте текстовый файл любого содержания в ```/data```;
- Добавьте еще один файл в папку ```/data``` на хостовой машине;
- Подключитесь во второй контейнер и отобразите листинг и содержание файлов в ```/data``` контейнера.


Решение:
vagrant@server1:~$ docker pull centos:latest

vagrant@server1:/data$ docker run --mount 'type=bind,source=/home/vagrant/data,target=/data' -it -d --entrypoint bash centos

vagrant@server1:~$docker pull debian:latest

vagrant@server1:/data$ docker run --mount 'type=bind,source=/home/vagrant/data,target=/data' -it -d --entrypoint bash Debian

vagrant@server1:/data$ docker exec -it 3e2416131cbf bash

[root@3e2416131cbf /]# cd /data

[root@3e2416131cbf data]# touch testfile2

[root@3e2416131cbf data]# echo URAAA > /data/testfile2

[root@3e2416131cbf data]# cat testfile2

URAAA

[root@3e2416131cbf data]# exit

vagrant@server1:~/data$ sudo vim  host

vagrant@server1:~/data$ cat host

rgij

vagrant@server1:~/data$ docker exec -it a52d7b1604c4 bash

root@a52d7b1604c4:/# cd data

root@a52d7b1604c4:/data# ls

host  testfile2


![image](https://user-images.githubusercontent.com/91233405/160253104-1492a19d-cb5d-4e11-9867-d97fe1332ba4.png)




## Задача 4 (*)

Воспроизвести практическую часть лекции самостоятельно.

Соберите Docker образ с Ansible, загрузите на Docker Hub и пришлите ссылку вместе с остальными ответами к задачам.


---

### Как cдавать задание

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---
